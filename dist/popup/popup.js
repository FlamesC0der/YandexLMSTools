async function getAllLessons(t,e){return new Promise(function(n,s){fetch(`https://lms.yandex.ru/api/student/lessons?courseId=${t}&groupId=${e}`).then(t=>t.json()).then(t=>{n(t)})})}async function getUserData(){return new Promise(function(t,e){fetch("https://lms.yandex.ru/api/profile?withChildren=true&withCoursesSummary=true&withExpelled=true&withParents=true").then(t=>t.json()).then(e=>{t(e)})})}async function getLessonTasks(t,e,n){return new Promise(function(s,i){fetch(`https://lms.yandex.ru/api/student/lessonTasks?courseId=${t}&lessonId=${n}&groupId=${e}`).then(t=>t.json()).then(t=>{s(t)})})}async function getSetting(t){return new Promise(function(e,n){chrome.storage.sync.get(t,function(t){e(t)})})}async function setSetting(t,e){return new Promise(function(n,s){(settingData={})[t]=e,chrome.storage.sync.set(settingData,function(){n(!0)})})}const RatingValues={classwork:{max:10,count:40},homework:{max:10,count:40},additional:{max:40,count:45},"control-work":{max:40,count:3},"individual-work":{max:20,count:4}},links={website:"https://flamecoder.pages.dev/",donate:"https://boosty.to/flamescoder",github:"https://github.com/FlamesC0der/YandexLMSTools"};function createLink(t,e){document.getElementById(e).addEventListener("click",()=>{chrome.tabs.create({url:t})})}function renderSettings(){document.getElementById("settings-btn");let t=document.getElementById("settings"),e=document.querySelector(".settings__fields");if(t.classList.contains("settings__opened")){e.innerHTML="",Object.entries({main:{"setting-dark":{txt:"Dark Theme",default:!1,beta:!0},"setting-banner":{txt:"Remove Banner",default:!0,beta:!0}},rating:{"setting-task-score":{txt:"Calculate task rating",default:!0,beta:!0}}}).forEach(t=>{let n=document.createElement("ul");n.classList.add("settings-group");let s=document.createElement("p");s.classList.add("settings-group__title"),s.textContent=t[0],n.appendChild(s),Object.entries(t[1]).forEach(async t=>{let e=await getSetting(t[0]);null==e[t[0]]&&(await setSetting(t[0],t[1].default),e=await getSetting(t[0]));let s=document.createElement("li");s.classList.add("settings-group__field");let i=document.createElement("label");i.classList.add("switch"),i.htmlFor=t[0],s.appendChild(i);let a=document.createElement("input");a.type="checkbox",a.checked=e[t[0]],a.id=t[0],a.addEventListener("change",async function(){await setSetting(this.id,this.checked)}),i.appendChild(a);let l=document.createElement("div");l.classList.add("slider"),l.classList.add("round"),i.appendChild(l);let d=document.createElement("p");d.classList.add("setting-field__text"),d.innerHTML=`<p class="setting-field__text">${t[1].txt} ${t[1].beta?'<span class="setting-field__beta">beta</span>':""}</p>`,s.appendChild(d),n.appendChild(s)}),e.appendChild(n)});let n=document.createElement("button");n.textContent="Reset",n.classList.add("settings-reset"),n.addEventListener("click",function(){chrome.storage.sync.clear(),renderSettings()}),e.appendChild(n)}}document.addEventListener("DOMContentLoaded",function(){createLink(links.website,"link-website"),createLink(links.donate,"link-donate"),createLink(links.github,"link-github");let t=document.getElementById("settings-btn"),e=document.getElementById("settings");t.addEventListener("click",function(){e.classList.toggle("settings__opened"),t.classList.toggle("settings-btn__opened"),renderSettings()})});